# .chezmoiexternal.toml.tmpl

{{- if and (not .ephemeral) (not .headless) }}
{{-   $fontDir := "" }}
{{-   if eq .chezmoi.os "darwin" }}
{{-     $fontDir = "~/Library/Fonts" }}
{{-   else if eq .chezmoi.os "linux" }}
{{-     $xdgDataHome := env "XDG_DATA_HOME" -}}
{{- /*  Use XDG_DATA_HOME only if it's within home directory, otherwise use default */ -}}
{{-     if $xdgDataHome -}}
{{-         if not (hasPrefix $xdgDataHome .chezmoi.homeDir) -}}
{{- /*          XDG_DATA_HOME is outside home, use default location for chezmoi external */ -}}
{{-             $xdgDataHome = printf "%s/.local/share" .chezmoi.homeDir -}}
{{-         end -}}
{{-     else -}}
{{-         $xdgDataHome = printf "%s/.local/share" .chezmoi.homeDir -}}
{{-     end -}}
{{- /*  Convert to ~ notation relative to home directory */ -}}
{{-     $fontPath := printf "%s/fonts/truetype" $xdgDataHome -}}
{{-     $relativePath := trimPrefix .chezmoi.homeDir $fontPath -}}
{{- /*  Remove leading slash if present and prepend ~ */ -}}
{{-     $fontDir = printf "~%s" (trimPrefix "/" $relativePath) -}}
{{-   end }}

["{{ $fontDir }}/Sauce Code Pro Mono Regular.ttf"]
    type = "file"
    url = "https://github.com/ryanoasis/nerd-fonts/raw/master/patched-fonts/SourceCodePro/Regular/complete/Sauce Code Pro Nerd Font Complete Mono.ttf"
    refreshPeriod = "168h"
["{{ $fontDir }}/Sauce Code Pro Mono Bold.ttf"]
    type = "file"
    url = "https://github.com/ryanoasis/nerd-fonts/raw/master/patched-fonts/SourceCodePro/Bold/complete/Sauce Code Pro Bold Nerd Font Complete Mono.ttf"
    refreshPeriod = "168h"
["{{ $fontDir }}/Sauce Code Pro Mono Italic.ttf"]
    type = "file"
    url = "https://github.com/ryanoasis/nerd-fonts/raw/master/patched-fonts/SourceCodePro/Italic/complete/Sauce Code Pro Italic Nerd Font Complete Mono.ttf"
    refreshPeriod = "168h"
["{{ $fontDir }}/Sauce Code Pro Mono Bold Italic.ttf"]
    type = "file"
    url = "https://github.com/ryanoasis/nerd-fonts/raw/master/patched-fonts/SourceCodePro/Bold-Italic/complete/Sauce Code Pro Bold Italic Nerd Font Complete Mono.ttf"
    refreshPeriod = "168h"
{{- end }}
